<!DOCTYPE HTML>

<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="#">

    <style>
        html,
        body {
            height: 100%;
        }

        .jsoneditor-poweredBy {
            display: none;
        }
    </style>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.10.2/jsoneditor.min.css" rel="stylesheet"
        type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.10.2/jsoneditor.min.js"></script>

    <script>
        var GetEditor = (container, disabled) => {
            let editor = new JSONEditor(container, { mode: 'code' });
            let textarea = container.getElementsByClassName('ace_text-input')[0];
            textarea.disabled = disabled;

            editor.setText('');

            return {
                setJSON: (json) => {
                    editor.set(json);
                },
                getJSON: () => {
                    return editor.get();
                },
                clear: () => {
                    editor.setText('');
                }
            }
        }

        AJAX = (rq) => {
            let xhttp = new XMLHttpRequest();
            xhttp.open(rq.method || 'GET', rq.url, true);
            xhttp.send(rq.data);
            xhttp.ajax_request = rq;

            return new Promise((rs, rj) => {

                xhttp.onreadystatechange = () => {
                    if (xhttp.readyState != 4) { return; }

                    let status = xhttp.status;
                    if ((status == 200) || (rq.scode || []).includes(status)) { rs(xhttp); } else { rj(xhttp); }
                };
            });
        };

        get_http_method = () => {
            let rds = document.frm_http_method.http_methods;
            for (let i = 0; i < rds.length; i++) {
                let rd = rds[i]
                if (rd.checked) {
                    return rd.value;
                }
            }
        };

    </script>

    <script>
        let get_response_data_view = null;
        let window_onload = () => {
            get_response_data_view = GetEditor(document.getElementById("get_response_data_view"), true);
        };

        let sendGet = () => {
            let txt_url = document.getElementById("txt_url")
            let url = (txt_url.value || '').trim();
            let http_method = get_http_method();

            AJAX({
                url: url,
                method: http_method
            }).then(v => {
                let responseText = v.responseText
                get_response_data_view.setJSON(JSON.parse(responseText))
            }).catch(v => {
                console.log(v.status);
            });

        };

        let clearIt = () => {
            get_response_data_view.clear();
        };

    </script>
</head>

<body onload="return window_onload()">
    <div>
        <div>
            <input id="txt_url" type="text" style="width: calc(100% - 300px);" />
            <span style="width: 300px;">
                <button style="width: 140px;" onclick="return sendGet();">Send</button>
                <button style="width: 140px;" onclick="return clearIt();">Clear</button>
            </span>
        </div>
        <div>
            <form name="frm_http_method">
                <span>HTTP method:</span>
                <input type="radio" id="rad_http_get" name="http_methods" value="GET" checked="checked">
                <label for="rad_http_get">GET</label>
                <input type="radio" id="rad_http_post" name="http_methods" value="POST">
                <label for="rad_http_post">POST</label>
            </form>
        </div>
        <div id="get_response_data_view" style="width: 100%; height: 500px;"></div>
    </div>
</body>

</html>